
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Kreuzworträtsel</title>
  <style>
    body { font-family: Arial; text-align: center; margin: 20px; }
    iframe { border: none; width: 100%; height: 600px; }
    #counter { font-size: 18px; margin-top: 10px; color: #333; }
    #error { color: #b00020; margin-top: 8px; }
  </style>
</head>
<body>
  <h1>Mein Kreuzworträtsel</h1>

  <!-- Iframe KORREKT geschlossen -->
  https://puzzel.org/de/crossword/play?p=-Oev45_ythddk4fRkgGP</iframe>

  <div id="counter">Besucherzahl wird geladen...</div>
  <div id="error"></div>

  <script>
    // ---- CountAPI Setup ----
    const namespace = "meinraetsel.github.io"; // frei wählbar, konstant halten
    const key = "Digital-Strategy-Cross-Word-Puzzle-1"; // KEIN nachgestelltes '-' !
    const encodedNs = encodeURIComponent(namespace);
    const encodedKey = encodeURIComponent(key);

    // Optional: Key einmalig initialisieren (nur nötig, wenn Startwert/TTL gewünscht)
    async function initCounter() {
      try {
        const res = await fetch(`https://api.countapi.xyz/create?namespace=${encodedNs}&key=${encodedKey}&value=0`);
        // Wenn bereits existiert, kommt i.d.R. trotzdem ein JSON zurück – wir ignorieren Fehler hier bewusst
        await res.json().catch(() => {});
      } catch (e) {
        // Initialisierung ist optional – keine harte Fehlermeldung
        console.warn("CountAPI init fehlgeschlagen:", e);
      }
    }

    async function hitAndShow() {
      try {
        const res = await fetch(`https://api.countapi.xyz/hit/${encodedNs}/${encodedKey}`);
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        document.getElementById("counter").textContent = `Besucherzahl: ${data.value}`;
      } catch (err) {
        document.getElementById("counter").textContent = "Besucherzahl: –";
        document.getElementById("error").textContent =
          "Tracking-Fehler. Prüfe Netzwerk/Adblocker/URL. Details: " + err.message;
        console.error("CountAPI Fehler:", err);
      }
    }

    (async () => {
      await initCounter();
      await hitAndShow();
    })();
  </script>
</body>
</html>
